<div class="profile-container">
  <img
    [src]="avatarUrl"
    (error)="customAvatarUrl = null"
    alt="User Avatar"
    class="profile-avatar"
  />

  <div class="profile-info">
    <h3>{{ name }}</h3>
    <p *ngIf="about">{{ about }}</p>
  </div>

  <div class="file-input-wrapper">
    <input
      type="file"
      id="avatarInput"
      (change)="onFileSelected($event)"
      class="file-input"
      accept="image/*"
    />
    <label for="avatarInput" class="button button-primary">
      <span class="icon-upload">↑</span> Выберите файл
    </label>
    <div class="file-name" *ngIf="selectedFileName">{{ selectedFileName }}</div>
  </div>

  <div class="action-buttons-row">
    <button class="button button-secondary" (click)="generateRandomName()">
      Случайное имя
    </button>
    <button class="button button-primary" (click)="toggleEdit()">
      {{ isEditing ? "Отмена" : "Редактировать" }}
    </button>
    <button class="button button-danger" (click)="removeAvatar()">
      Удалить аватар
    </button>
  </div>

  <div *ngIf="isEditing" class="edit-form">
    <div class="form-group">
      <label for="name">Имя:</label>
      <input
        id="name"
        type="text"
        [(ngModel)]="name"
        class="form-control"
        placeholder="Введите имя"
        maxlength="30"
      />
      <div class="char-counter">{{ name.length }}/30</div>
    </div>

    <div class="form-group">
      <label for="about">О себе:</label>
      <textarea
        id="about"
        [(ngModel)]="about"
        class="form-control"
        placeholder="Расскажите о себе"
        maxlength="200"
      ></textarea>
      <div class="char-counter">{{ about.length }}/200</div>
    </div>

    <button class="button button-success" (click)="saveProfile()">
      Сохранить
    </button>
  </div>
</div>
